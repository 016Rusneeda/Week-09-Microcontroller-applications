digraph LED_Circuit {
    // Graph settings
    rankdir=LR;
    bgcolor="white";
    node [fontname="Arial", fontsize=10];
    edge [fontname="Arial", fontsize=9];
    
    // Subgraph for ESP32
    subgraph cluster_esp32 {
        label="ESP32";
        style=filled;
        fillcolor="#E8F4FD";
        fontsize=12;
        fontname="Arial Bold";
        
        gpio2 [label="GPIO 2\n3.3V", shape=box, style=filled, fillcolor="#FFF2CC"];
        gnd [label="GND\n0V", shape=box, style=filled, fillcolor="#D5E8D4"];
    }
    
    // LED representation using HTML-like labels
    led [label=<
        <TABLE BORDER="0" CELLBORDER="1" CELLSPACING="0">
            <TR><TD BGCOLOR="#FFE6E6" PORT="anode">+</TD></TR>
            <TR><TD BGCOLOR="#FF9999">LED</TD></TR>
            <TR><TD BGCOLOR="#FFE6E6" PORT="cathode">-</TD></TR>
        </TABLE>
    >, shape=plaintext];
    
    // Resistor representation
    resistor [label=<
        <TABLE BORDER="0" CELLBORDER="1" CELLSPACING="0">
            <TR><TD BGCOLOR="#FFFFCC">470Î©</TD></TR>
            <TR><TD BGCOLOR="#FFFF99">RES</TD></TR>
        </TABLE>
    >, shape=plaintext];
    
    // Connections
    gpio2 -> resistor [label="Current\nLimit", color="red", penwidth=2];
    resistor -> led:anode [label="I = 3.4mA", color="red", penwidth=2];
    led:cathode -> gnd [label="Return\nPath", color="blue", penwidth=2];
    
    // Voltage annotations
    v1 [label="3.3V", shape=plaintext, fontcolor="red"];
    v2 [label="1.6V", shape=plaintext, fontcolor="orange"];
    v3 [label="1.7V", shape=plaintext, fontcolor="green"];
    v4 [label="0V", shape=plaintext, fontcolor="blue"];
    
    // Position voltage labels correctly (top to bottom)
    {rank=same; v1; gpio2}      // 3.3V at top
    {rank=same; v2; resistor}   // 2.0V at resistor
    {rank=same; v3; led}        // 1.3V at LED
    {rank=same; v4; gnd}        // 0V at bottom
    
    // Title
    label="ESP32 GPIO + LED Circuit";
    labelloc="t";
    fontsize=14;
    fontname="Arial Bold";
}
